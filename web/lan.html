<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description"
    content="GoShare LAN — Auto-discover devices on your local network and share files instantly with drag and drop.">
  <title>GoShare — LAN</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-inner">
      <a href="index.html" class="navbar-brand">
        <span class="logo-dot"></span>
        GoShare
      </a>
      <div class="navbar-links">
        <a href="lan.html" class="navbar-link active">LAN</a>
        <a href="p2p.html" class="navbar-link">P2P</a>
        <a href="https://github.com/tanvir-cpp/GoShare" target="_blank" rel="noopener" class="navbar-link-icon"
          title="GitHub">
          <svg fill="currentColor" viewBox="0 0 24 24">
            <path
              d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12Z" />
          </svg>
        </a>
      </div>
    </div>
  </nav>

  <!-- LAN Content -->
  <div class="lan-page">

    <!-- Header -->
    <header class="lan-header">
      <h1>
        <span class="text-gradient-amber">Go</span>Share
      </h1>
      <p class="subtitle">
        LAN File Sharing &bull; Instant &amp; Private
      </p>
      <button id="urlBox" onclick="copyUrl()" onkeydown="event.key === 'Enter' && copyUrl()" title="Click to copy URL"
        class="url-box">
        <span id="shareUrl">Loading...</span>
        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9.75a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" />
        </svg>
      </button>
    </header>

    <!-- Device Area -->
    <div id="deviceArea" class="device-area">
      <div class="me-ring"></div>
      <div class="me-ring" style="animation-delay: 1.3s"></div>
      <div class="me-ring" style="animation-delay: 2.6s"></div>
      <!-- Me Node -->
      <button onclick="openSharedUpload()" onkeydown="event.key === 'Enter' && openSharedUpload()" class="me-node">
        <div id="meIcon" class="me-icon"></div>
        <div id="meName" class="me-name"></div>
        <div class="me-label">You</div>
      </button>
    </div>

    <!-- Empty State -->
    <div id="emptyState" class="empty-state">
      <div id="deviceCount" class="device-count">0 devices online</div>
      <p>Share the URL above to start transferring files</p>
    </div>
  </div>

  <!-- Shared Files Bar (fixed bottom) -->
  <div id="sharedBar" class="shared-bar">
    <button onclick="openSharedUpload()" title="Upload files to shared space" class="btn btn-amber btn-sm">
      <svg fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5" />
      </svg>
      Upload File
    </button>
  </div>

  <!-- Send File Modal -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal-card">
      <h2>Send file to</h2>
      <div id="modalIcon" class="modal-icon"></div>
      <div id="modalName" class="modal-name"></div>

      <div id="modalDropArea" class="drop-area">
        <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776" />
        </svg>
        <strong>Drag & Drop files here</strong>
        <p>or click to browse</p>
      </div>
      <input type="file" id="modalFileInput" multiple style="display:none" />

      <div id="transferProgress" class="progress-container hidden">
        <div class="progress-track">
          <div id="transferFill" class="progress-fill amber" style="width: 0"></div>
        </div>
        <div class="progress-info">
          <span id="transferPercent" class="percent">0%</span>
          <span>&bull;</span>
          <span id="transferStatus" class="status">Preparing...</span>
        </div>
      </div>

      <button onclick="closeModal()" class="btn btn-ghost btn-block mt-4">
        Cancel
      </button>
    </div>
  </div>

  <!-- Shared Upload Modal -->
  <div class="modal-overlay" id="sharedOverlay">
    <div class="modal-card">
      <h2>
        <svg style="width:24px;height:24px;color:var(--amber);display:inline;vertical-align:middle;margin-right:8px"
          fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776" />
        </svg>
        Shared Space
      </h2>
      <p style="text-align:center;font-size:0.82rem;color:var(--text-muted);margin-bottom:20px">
        Anyone on the network can see these files
      </p>

      <div id="sharedDropArea" class="drop-area" style="padding:32px 16px">
        <strong>Tap to Upload</strong>
        <p>or drag files here</p>
      </div>
      <input type="file" id="sharedFileInput" multiple style="display:none" />

      <div id="sharedProgress" class="progress-container hidden">
        <div class="progress-track">
          <div id="sharedFill" class="progress-fill amber" style="width: 0"></div>
        </div>
        <div class="progress-info">
          <span id="sharedPercent" class="percent">0%</span>
          <span>&bull;</span>
          <span id="sharedStatus" class="status"></span>
        </div>
      </div>

      <button onclick="closeSharedOverlay()" class="btn btn-ghost btn-block mt-4">
        Close
      </button>
    </div>
  </div>

  <!-- Notification -->
  <div id="notif" class="notification">
    <div class="notif-header">
      <svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M9 3.75H6.912a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859M12 3v8.25m0 0-3-3m3 3 3-3" />
      </svg>
      <div class="notif-text">
        <span id="notifTitle" class="notif-title">New File Received</span>
        <span id="notifSub" class="notif-sub">filename.ext</span>
      </div>
    </div>
    <button onclick="downloadNotifFile()" class="btn btn-amber btn-block">
      Download
    </button>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast amber">
    Copied to clipboard!
  </div>

  <script src="app.js"></script>
</body>

</html>